<!DOCTYPE html><html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Twin Racing</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    .search-bar input, .search-bar select { margin: 5px; padding: 5px; }
    .product { border: 1px solid #ccc; border-radius: 10px; padding: 10px; margin: 10px 0; }
    img { max-width: 150px; display: block; margin-bottom: 10px; }
  </style>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-app.js";
    import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-firestore.js";const firebaseConfig = {
  apiKey: "AIzaSyC0nt3jsF2TtovgNkx8x0p9iUyyWaDYf8Q",
  authDomain: "twinracing-5c171.firebaseapp.com",
  projectId: "twinracing-5c171",
  storageBucket: "twinracing-5c171.firebasestorage.app",
  messagingSenderId: "935865625166",
  appId: "1:935865625166:web:758b879ec96eecda18b11f",
  measurementId: "G-GBM4MPMB7P"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

let products = [];

async function loadProducts() {
  const snapshot = await getDocs(collection(db, "products"));
  products = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
  displayProducts(products);
}

function displayProducts(data) {
  const container = document.getElementById("product-list");
  container.innerHTML = "";
  data.forEach(product => {
    const div = document.createElement("div");
    div.className = "product";
    div.innerHTML = `
      <strong>${product.name}</strong> (${product.category || "Không phân loại"})<br>
      <img src="${product.image}" alt="${product.name}"><br>
      <em>${product.price} - ${product.desc}</em><br>
      <a href="${product.link}" target="_blank">Mua ngay</a>
    `;
    container.appendChild(div);
  });
}

function filterProducts() {
  const search = document.getElementById("search").value.toLowerCase();
  const category = document.getElementById("filter-category").value;
  const priceRange = document.getElementById("filter-price").value;

  let filtered = products.filter(p => p.name.toLowerCase().includes(search));

  if (category) {
    filtered = filtered.filter(p => p.category === category);
  }

  if (priceRange) {
    const [min, max] = priceRange.split("-").map(Number);
    filtered = filtered.filter(p => {
      const price = parseInt(p.price.replace(/[^0-9]/g, ""));
      return price >= min && price <= max;
    });
  }

  displayProducts(filtered);
}

window.addEventListener("DOMContentLoaded", () => {
  loadProducts();
  document.getElementById("search").addEventListener("input", filterProducts);
  document.getElementById("filter-category").addEventListener("change", filterProducts);
  document.getElementById("filter-price").addEventListener("change", filterProducts);
});

  </script>
</head>
<body>
  <h1>Sản phẩm - Twin Racing</h1>  <div class="search-bar">
    <input type="text" id="search" placeholder="Tìm kiếm tên sản phẩm...">
    <select id="filter-category">
      <option value="">-- Tất cả loại --</option>
      <option value="Ốc titan">Ốc titan</option>
      <option value="Ốc Salaya">Ốc Salaya</option>
      <option value="Phụ kiện inox">Phụ kiện inox</option>
    </select>
    <select id="filter-price">
      <option value="">-- Tất cả giá --</option>
      <option value="0-50000">Dưới 50k</option>
      <option value="50000-100000">50k - 100k</option>
      <option value="100000-200000">100k - 200k</option>
      <option value="200000-1000000">Trên 200k</option>
    </select>
  </div>  <div id="product-list"></div>
</body>
</html>
