<!DOCTYPE html><html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Trang Admin - Twin Racing</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
  <style>
    body { background: #f8f9fa; padding: 20px; }
    .hidden { display: none; }
  </style>
</head>
<body>
  <div id="loginForm">
    <h3>Đăng nhập Admin</h3>
    <input type="password" id="adminPassword" class="form-control" placeholder="Nhập mật khẩu...">
    <button class="btn btn-primary mt-2" onclick="loginAdmin()">Đăng nhập</button>
  </div>  <div id="adminPanel" class="hidden">
    <h2>Quản lý sản phẩm</h2>
    <form id="productForm">
      <input type="text" id="name" placeholder="Tên sản phẩm" class="form-control mb-2" required>
      <input type="text" id="description" placeholder="Mô tả" class="form-control mb-2">
      <input type="text" id="category" placeholder="Phân loại (Ốc titan...)" class="form-control mb-2">
      <input type="number" id="price" placeholder="Giá" class="form-control mb-2">
      <input type="text" id="image" placeholder="Link ảnh" class="form-control mb-2">
      <input type="text" id="link" placeholder="Link mua" class="form-control mb-2">
      <input type="hidden" id="productId">
      <button class="btn btn-success" type="submit">Lưu sản phẩm</button>
    </form><hr />
<div id="productList" class="row"></div>

  </div>  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyC0nt3jsF2TtovgNkx8x0p9iUyyWaDYf8Q",
      authDomain: "twinracing-5c171.firebaseapp.com",
      databaseURL: "https://twinracing-5c171-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "twinracing-5c171",
      storageBucket: "twinracing-5c171.appspot.com",
      messagingSenderId: "935865625166",
      appId: "1:935865625166:web:758b879ec96eecda18b11f"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const adminPassword = "123456"; // Đổi mật khẩu tại đây

    function loginAdmin() {
      const input = document.getElementById("adminPassword").value;
      if (input === adminPassword) {
        document.getElementById("loginForm").classList.add("hidden");
        document.getElementById("adminPanel").classList.remove("hidden");
        loadProducts();
      } else {
        alert("Sai mật khẩu!");
      }
    }

    document.getElementById("productForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const product = {
        name: name.value,
        description: description.value,
        category: category.value,
        price: price.value,
        image: image.value,
        link: link.value
      };
      const id = productId.value;
      if (id) db.ref("sanpham/" + id).set(product);
      else db.ref("sanpham").push(product);
      this.reset();
      productId.value = "";
    });

    function loadProducts() {
      db.ref("sanpham").on("value", snapshot => {
        const list = document.getElementById("productList");
        list.innerHTML = "";
        snapshot.forEach(child => {
          const item = child.val();
          const key = child.key;
          const div = document.createElement("div");
          div.className = "col-md-4 mb-3";
          div.innerHTML = `
            <div class="card p-2">
              <img src="${item.image}" class="card-img-top" alt="${item.name}"/>
              <div class="card-body">
                <h5>${item.name}</h5>
                <p>${item.description}</p>
                <p><strong>${item.price}đ</strong></p>
                <p><span class="badge bg-info">${item.category}</span></p>
                <button class="btn btn-sm btn-primary" onclick='editProduct("${key}", ${JSON.stringify(item)})'>Sửa</button>
                <button class="btn btn-sm btn-danger" onclick='deleteProduct("${key}")'>Xoá</button>
              </div>
            </div>
          `;
          list.appendChild(div);
        });
      });
    }

    function editProduct(id, data) {
      name.value = data.name;
      description.value = data.description;
      category.value = data.category;
      price.value = data.price;
      image.value = data.image;
      link.value = data.link;
      productId.value = id;
    }

    function deleteProduct(id) {
      if (confirm("Bạn có chắc chắn xoá sản phẩm này?")) {
        db.ref("sanpham/" + id).remove();
      }
    }
  </script></body>
</html>
